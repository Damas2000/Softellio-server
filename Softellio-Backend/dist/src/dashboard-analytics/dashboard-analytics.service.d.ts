import { PrismaService } from '../config/prisma.service';
import { RecordVisitDto, AnalyticsQueryDto, CreateDashboardWidgetDto, UpdateDashboardWidgetDto, DashboardQueryDto, CreateAnalyticsReportDto, UpdateAnalyticsReportDto, RecordSystemMetricDto, SystemMetricsQueryDto, UpdateContentAnalyticsDto, ContentAnalyticsQueryDto, CreateActiveSessionDto, UpdateActiveSessionDto, CreateConversionGoalDto, UpdateConversionGoalDto, RecordConversionDto, DashboardOverviewQueryDto, WidgetDataQueryDto, RealTimeQueryDto, OverviewStatsResponse, PopularPagesResponse, TrafficSourcesResponse, DeviceAnalyticsResponse, GeographicAnalyticsResponse, RealTimeVisitorsResponse } from './dto/dashboard-analytics.dto';
export declare class DashboardAnalyticsService {
    private readonly prisma;
    constructor(prisma: PrismaService);
    recordVisit(visitData: RecordVisitDto, tenantId: number, ipAddress?: string, userAgent?: string): Promise<{
        id: number;
        userId: string | null;
        tenantId: number;
        ipAddress: string | null;
        userAgent: string | null;
        createdAt: Date;
        language: string | null;
        errors: string | null;
        entityType: string | null;
        entityId: number | null;
        referrer: string | null;
        pageUrl: string;
        pagePath: string;
        pageTitle: string | null;
        sessionId: string | null;
        timeOnPage: number | null;
        scrollDepth: number | null;
        bounceRate: boolean;
        exitPage: boolean;
        utmSource: string | null;
        utmMedium: string | null;
        utmCampaign: string | null;
        utmTerm: string | null;
        utmContent: string | null;
        loadTime: number | null;
        deviceType: string | null;
        country: string | null;
        browserName: string | null;
        osName: string | null;
        city: string | null;
        visitedAt: Date;
    }>;
    getAnalyticsOverview(tenantId: number, query: DashboardOverviewQueryDto): Promise<OverviewStatsResponse>;
    getPopularPages(tenantId: number, query: AnalyticsQueryDto): Promise<PopularPagesResponse[]>;
    getTrafficSources(tenantId: number, query: AnalyticsQueryDto): Promise<TrafficSourcesResponse[]>;
    getDeviceAnalytics(tenantId: number, query: AnalyticsQueryDto): Promise<DeviceAnalyticsResponse[]>;
    getGeographicAnalytics(tenantId: number, query: AnalyticsQueryDto): Promise<GeographicAnalyticsResponse[]>;
    getAnalyticsTrends(tenantId: number, query: AnalyticsQueryDto): Promise<{
        date: Date;
        visitors: any;
        pageviews: any;
        averageSessionDuration: number;
    }[]>;
    getAllDashboardWidgets(tenantId: number, query: DashboardQueryDto): Promise<{
        isPublic: boolean;
        description: string | null;
        type: string;
        title: string | null;
        query: import("@prisma/client/runtime/library").JsonValue | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        color: string | null;
        icon: string | null;
        category: string;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        size: string;
        position: import("@prisma/client/runtime/library").JsonValue | null;
        dataSource: string;
        allowedRoles: string[];
        refreshInterval: number | null;
    }[]>;
    getDashboardWidgetById(id: number, tenantId: number): Promise<{
        isPublic: boolean;
        description: string | null;
        type: string;
        title: string | null;
        query: import("@prisma/client/runtime/library").JsonValue | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        color: string | null;
        icon: string | null;
        category: string;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        size: string;
        position: import("@prisma/client/runtime/library").JsonValue | null;
        dataSource: string;
        allowedRoles: string[];
        refreshInterval: number | null;
    }>;
    createDashboardWidget(createDto: CreateDashboardWidgetDto, tenantId: number): Promise<{
        isPublic: boolean;
        description: string | null;
        type: string;
        title: string | null;
        query: import("@prisma/client/runtime/library").JsonValue | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        color: string | null;
        icon: string | null;
        category: string;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        size: string;
        position: import("@prisma/client/runtime/library").JsonValue | null;
        dataSource: string;
        allowedRoles: string[];
        refreshInterval: number | null;
    }>;
    updateDashboardWidget(id: number, updateDto: UpdateDashboardWidgetDto, tenantId: number): Promise<{
        isPublic: boolean;
        description: string | null;
        type: string;
        title: string | null;
        query: import("@prisma/client/runtime/library").JsonValue | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        color: string | null;
        icon: string | null;
        category: string;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        size: string;
        position: import("@prisma/client/runtime/library").JsonValue | null;
        dataSource: string;
        allowedRoles: string[];
        refreshInterval: number | null;
    }>;
    deleteDashboardWidget(id: number, tenantId: number): Promise<void>;
    getWidgetData(tenantId: number, query: WidgetDataQueryDto): Promise<any>;
    getAllAnalyticsReports(tenantId: number): Promise<({
        executions: {
            status: string;
            id: number;
            createdAt: Date;
            startedAt: Date;
            reportId: number;
            completedAt: Date | null;
            duration: number | null;
            fileUrl: string | null;
            fileSize: number | null;
            recordCount: number | null;
            errorMessage: string | null;
            executionData: import("@prisma/client/runtime/library").JsonValue | null;
        }[];
    } & {
        description: string | null;
        format: string;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        startDate: Date | null;
        endDate: Date | null;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        reportType: string;
        metrics: import("@prisma/client/runtime/library").JsonValue;
        dateRange: string;
        recipients: string[];
        isScheduled: boolean;
        schedule: string | null;
        timezone: string;
        nextRunAt: Date | null;
        lastRunAt: Date | null;
    })[]>;
    createAnalyticsReport(createDto: CreateAnalyticsReportDto, tenantId: number): Promise<{
        description: string | null;
        format: string;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        startDate: Date | null;
        endDate: Date | null;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        reportType: string;
        metrics: import("@prisma/client/runtime/library").JsonValue;
        dateRange: string;
        recipients: string[];
        isScheduled: boolean;
        schedule: string | null;
        timezone: string;
        nextRunAt: Date | null;
        lastRunAt: Date | null;
    }>;
    updateAnalyticsReport(id: number, updateDto: UpdateAnalyticsReportDto, tenantId: number): Promise<{
        description: string | null;
        format: string;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        startDate: Date | null;
        endDate: Date | null;
        filters: import("@prisma/client/runtime/library").JsonValue | null;
        reportType: string;
        metrics: import("@prisma/client/runtime/library").JsonValue;
        dateRange: string;
        recipients: string[];
        isScheduled: boolean;
        schedule: string | null;
        timezone: string;
        nextRunAt: Date | null;
        lastRunAt: Date | null;
    }>;
    generateReport(reportId: number, tenantId: number): Promise<OverviewStatsResponse | {
        data: {
            id: number;
            tenantId: number;
            createdAt: Date;
            date: Date;
            updatedAt: Date;
            entityType: string;
            entityId: number;
            viewCount: number;
            bounceRate: number;
            contentTitle: string | null;
            contentSlug: string | null;
            uniqueViews: number;
            averageTimeOnPage: number;
            conversionRate: number;
            shareCount: number;
            commentCount: number;
            organicTraffic: number;
            searchImpressions: number;
            searchClicks: number;
            averagePosition: number;
        }[];
        meta: {
            total: number;
            page: number;
            limit: number;
            pages: number;
        };
    }>;
    recordSystemMetric(metricData: RecordSystemMetricDto, tenantId: number): Promise<{
        tags: string[];
        status: string;
        id: number;
        tenantId: number | null;
        metadata: import("@prisma/client/runtime/library").JsonValue | null;
        createdAt: Date;
        category: string;
        value: number;
        metricType: string;
        metricName: string;
        unit: string | null;
        component: string | null;
        warningThreshold: number | null;
        criticalThreshold: number | null;
        recordedAt: Date;
    }>;
    getSystemMetrics(tenantId: number, query: SystemMetricsQueryDto): Promise<any>;
    updateContentAnalytics(updateDto: UpdateContentAnalyticsDto, tenantId: number): Promise<{
        id: number;
        tenantId: number;
        createdAt: Date;
        date: Date;
        updatedAt: Date;
        entityType: string;
        entityId: number;
        viewCount: number;
        bounceRate: number;
        contentTitle: string | null;
        contentSlug: string | null;
        uniqueViews: number;
        averageTimeOnPage: number;
        conversionRate: number;
        shareCount: number;
        commentCount: number;
        organicTraffic: number;
        searchImpressions: number;
        searchClicks: number;
        averagePosition: number;
    }>;
    getContentAnalytics(tenantId: number, query: ContentAnalyticsQueryDto): Promise<{
        data: {
            id: number;
            tenantId: number;
            createdAt: Date;
            date: Date;
            updatedAt: Date;
            entityType: string;
            entityId: number;
            viewCount: number;
            bounceRate: number;
            contentTitle: string | null;
            contentSlug: string | null;
            uniqueViews: number;
            averageTimeOnPage: number;
            conversionRate: number;
            shareCount: number;
            commentCount: number;
            organicTraffic: number;
            searchImpressions: number;
            searchClicks: number;
            averagePosition: number;
        }[];
        meta: {
            total: number;
            page: number;
            limit: number;
            pages: number;
        };
    }>;
    createActiveSession(sessionData: CreateActiveSessionDto, tenantId: number, ipAddress?: string, userAgent?: string): Promise<{
        id: string;
        tenantId: number;
        ipAddress: string | null;
        userAgent: string | null;
        lastActivity: Date;
        currentPage: string;
        referrer: string | null;
        pageTitle: string | null;
        deviceType: string | null;
        country: string | null;
        pageViews: number;
        timeOnSite: number;
        isBot: boolean;
        city: string | null;
        startedAt: Date;
        expiresAt: Date;
    }>;
    updateActiveSession(sessionId: string, updateData: UpdateActiveSessionDto, tenantId: number): Promise<{
        id: string;
        tenantId: number;
        ipAddress: string | null;
        userAgent: string | null;
        lastActivity: Date;
        currentPage: string;
        referrer: string | null;
        pageTitle: string | null;
        deviceType: string | null;
        country: string | null;
        pageViews: number;
        timeOnSite: number;
        isBot: boolean;
        city: string | null;
        startedAt: Date;
        expiresAt: Date;
    }>;
    getRealTimeVisitors(tenantId: number, query: RealTimeQueryDto): Promise<RealTimeVisitorsResponse>;
    cleanupExpiredSessions(): Promise<number>;
    getAllConversionGoals(tenantId: number): Promise<({
        conversions: {
            id: number;
            ipAddress: string | null;
            userAgent: string | null;
            metadata: import("@prisma/client/runtime/library").JsonValue | null;
            createdAt: Date;
            value: number | null;
            referrer: string | null;
            sessionId: string | null;
            utmSource: string | null;
            utmMedium: string | null;
            utmCampaign: string | null;
            currency: string | null;
            goalId: number;
            convertedAt: Date;
        }[];
    } & {
        description: string | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        goalType: string;
        targetUrl: string | null;
        targetElement: string | null;
        eventName: string | null;
        conditions: import("@prisma/client/runtime/library").JsonValue | null;
        hasValue: boolean;
        defaultValue: number | null;
        currency: string | null;
    })[]>;
    createConversionGoal(createDto: CreateConversionGoalDto, tenantId: number): Promise<{
        description: string | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        goalType: string;
        targetUrl: string | null;
        targetElement: string | null;
        eventName: string | null;
        conditions: import("@prisma/client/runtime/library").JsonValue | null;
        hasValue: boolean;
        defaultValue: number | null;
        currency: string | null;
    }>;
    updateConversionGoal(id: number, updateDto: UpdateConversionGoalDto, tenantId: number): Promise<{
        description: string | null;
        name: string;
        id: number;
        tenantId: number;
        createdAt: Date;
        isActive: boolean;
        updatedAt: Date;
        goalType: string;
        targetUrl: string | null;
        targetElement: string | null;
        eventName: string | null;
        conditions: import("@prisma/client/runtime/library").JsonValue | null;
        hasValue: boolean;
        defaultValue: number | null;
        currency: string | null;
    }>;
    deleteConversionGoal(id: number, tenantId: number): Promise<void>;
    recordConversion(conversionData: RecordConversionDto, ipAddress?: string, userAgent?: string): Promise<{
        id: number;
        ipAddress: string | null;
        userAgent: string | null;
        metadata: import("@prisma/client/runtime/library").JsonValue | null;
        createdAt: Date;
        value: number | null;
        referrer: string | null;
        sessionId: string | null;
        utmSource: string | null;
        utmMedium: string | null;
        utmCampaign: string | null;
        currency: string | null;
        goalId: number;
        convertedAt: Date;
    }>;
    private getBasicStats;
    private calculatePercentageChange;
    private calculateDateRange;
    private buildDateFilter;
    private parseUserAgent;
    private getGeoInfo;
    private extractDomain;
    private getCountryCode;
    private calculatePageBounceRate;
    private getGroupByFields;
    private formatGroupByDate;
    private calculateNextRunTime;
    private generateReportData;
    private generateTrafficReport;
    private generateContentReport;
    private getWebsiteAnalyticsData;
    private getContentAnalyticsData;
    private getSystemMetricsData;
    private groupMetricsByTime;
    private getTimeKey;
    private groupAnalyticsByDate;
}
