import { OnModuleInit, OnModuleDestroy } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { PrismaService } from '../config/prisma.service';
import { EventEmitter } from 'events';
import { LogEntry, SystemMetric, PerformanceMetrics, AlertRule, MonitoringConfiguration, MonitoringStats, DashboardData } from './interfaces/monitoring.interfaces';
import { CreateLogEntryDto, LogQueryDto, CreateMetricDto, MetricQueryDto, CreateAlertRuleDto, UpdateAlertRuleDto, MonitoringConfigurationDto } from './dto/monitoring.dto';
export declare class MonitoringService extends EventEmitter implements OnModuleInit, OnModuleDestroy {
    private prisma;
    private configService;
    private readonly logger;
    private config;
    private metricsCollectionInterval;
    private healthCheckInterval;
    private alertCheckInterval;
    private logFileHandle;
    private startTime;
    private metricsCache;
    private lastPerformanceMetrics;
    private maintenanceWindows;
    constructor(prisma: PrismaService, configService: ConfigService);
    onModuleInit(): Promise<void>;
    onModuleDestroy(): Promise<void>;
    private initializeConfiguration;
    updateConfiguration(configDto: MonitoringConfigurationDto): Promise<MonitoringConfiguration>;
    getConfiguration(): MonitoringConfiguration;
    private setupLogFile;
    createLogEntry(logDto: CreateLogEntryDto, tenantId?: number): Promise<LogEntry>;
    private shouldLogLevel;
    private writeToConsole;
    private writeToFile;
    private writeToDatabase;
    queryLogs(query: LogQueryDto, tenantId?: number): Promise<{
        logs: LogEntry[];
        total: number;
    }>;
    logError(message: string, context?: string, metadata?: any, tenantId?: number): Promise<void>;
    logWarn(message: string, context?: string, metadata?: any, tenantId?: number): Promise<void>;
    logInfo(message: string, context?: string, metadata?: any, tenantId?: number): Promise<void>;
    logDebug(message: string, context?: string, metadata?: any, tenantId?: number): Promise<void>;
    private startMetricsCollection;
    private collectSystemMetrics;
    private calculateCPUUsage;
    createMetric(metricDto: CreateMetricDto | SystemMetric, tenantId?: number): Promise<SystemMetric>;
    queryMetrics(query: MetricQueryDto, tenantId?: number): Promise<SystemMetric[]>;
    getPerformanceMetrics(): Promise<PerformanceMetrics>;
    private startHealthChecks;
    private performHealthChecks;
    private checkServiceHealth;
    private checkDatabaseHealth;
    private checkRedisHealth;
    private checkApplicationHealth;
    private startAlertProcessing;
    private processAlerts;
    private getActiveAlertRules;
    private evaluateAlertRule;
    private evaluateCondition;
    private getLatestMetricValue;
    private triggerAlert;
    private resolveAlert;
    private sendAlertNotifications;
    private sendNotification;
    getMonitoringStats(tenantId?: number): Promise<MonitoringStats>;
    getDashboardData(tenantId?: number): Promise<DashboardData>;
    private getRecentAlerts;
    private getRecentLogs;
    private getServiceHealthStatuses;
    cleanupOldData(): Promise<void>;
    createAlertRule(ruleDto: CreateAlertRuleDto, tenantId?: number): Promise<AlertRule>;
    updateAlertRule(id: string, updateDto: UpdateAlertRuleDto): Promise<AlertRule>;
    deleteAlertRule(id: string): Promise<void>;
    private convertMetadataToLabels;
}
